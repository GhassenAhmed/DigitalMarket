<div class="animation">
  <div class="container-anim d-flex align-content-center">
    <h1 class="" style="font-size: 20px;">free palestine</h1>
    <div class="container-flag mt-2">
      <div class="red"></div>
      <div class="black"></div>
      <div class="white"></div>
      <div class="green"></div>
    </div>
  </div>
 </div>

<nav class="navbar navbar-expand-lg" style="height: 90px;background-color: #F0F0F0;">
  <div class="container-fluid">

    <button class="navbar-toggler" mat-button [matMenuTriggerFor]="aboveMenu" >
      <i class="bi bi-list" style="font-size: 35px"></i>
     <mat-menu #aboveMenu="matMenu" yPosition="above">
       <button mat-menu-item routerLink="/cart"> <i class="bi bi-cart-fill menu-boredered"></i>Cart</button>
       <button mat-menu-item><i class="bi bi-person-circle menu-boredered"></i>User</button>
       <button   mat-menu-item  routerLink="/auth/signup/Supplier" ><i  class="bi bi-shop menu-boredered"></i>Become vendor</button>
       <mat-divider></mat-divider>
       <mat-list role="list">
         <mat-list-item ><span class="list-title" style="margin-right: 10px;">Categories</span><i class="bi bi-arrow-down" style="font-size: 20px;"></i> </mat-list-item>
         <mat-list-item role="listitem" routerLink="/categories/{{item['id']}}"  *ngFor="let item of categories" (click)="refreshPage(item['id'])"> <button mat-button class="list-items">{{item['nom']}}</button></mat-list-item>
       </mat-list>
     </mat-menu>
 </button>
 <a class="navbar-brand" routerLink="/">DIGITAL MARKET</a>

    <div class="input-group">
      <input class="form-control me-2" type="search" placeholder="Search Products" aria-label="Search" style="height: 50px;">
      <button class="btn btn-outline-secondary" type="button">
        <i class="bi bi-search"></i>
      </button>
    </div>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="pt-4">
        <li class="bordered" routerLink="/cart" [matBadge]="nbrArticle"><i class="bi bi-cart-fill"></i>Cart</li>
        <li class="bordered" routerLink="/auth/signup/Supplier"><i class="bi bi-shop"></i>Become vendor</li>
        <li  [matMenuTriggerFor]="auth" *ngIf="!AuthServiceService.isAuth"><i class="bi bi-person-circle" ></i>User</li>
        <li [matMenuTriggerFor]="user" class="bordered" *ngIf="AuthServiceService.isAuth"  class="d-block link-dark text-decoration-none">
             <img src="../../../assets/ImagesSignup/Digital Market.png" alt="mdo" width="32" height="32" class="rounded-circle">
             talel
        </li>
        <mat-menu #user="matMenu">
          <button mat-menu-item >
            <mat-icon>credit_card_gear</mat-icon>
            <span>List Command</span>
          </button>
          <button mat-menu-item routerLink="/CommandeLocation">
            <mat-icon>pin_drop</mat-icon>
            <span>Location Command</span>
          </button>
          <button mat-menu-item >
            <mat-icon>favorite</mat-icon>
            <span >WishList</span>
          </button>

          <button mat-menu-item routerLink="/editProfile">
            <mat-icon>supervised_user_circle</mat-icon>
            <span >Profile</span>
          </button>
        </mat-menu>
        <mat-menu #auth="matMenu">
          <button mat-menu-item>
            <mat-icon>account_circle</mat-icon>
            <span>Log In</span>
          </button>
          <button mat-menu-item routerLink="/auth/signup/Client">
            <mat-icon>account_box</mat-icon>
            <span >Sign Up</span>
          </button>
        </mat-menu>
      </ul>
    </div>
    </div>
</nav>

<div class="container nav2">
  <li class="categories d-none d-lg-block">All Categories <i class="bi bi-arrow-down-short" ></i></li>
  <li *ngFor="let item of categories" class="categories d-none d-lg-block" (click)="refreshPage(item['id'])">{{item['nom']}}</li>
</div>

<div class="container mt-5">
  <div class="row">
    <h3 style="color: rgb(97, 96, 96);">Accueil   >  catalogue  > <span style="border-bottom: #919191 solid 2px;">{{category}}</span></h3>
  </div>
  <div class="row">


  <!-- ------------------------------------filtre --------------------------------->
    <div class="col col-xl-4  col-lg-4 col-md-12 col-sm-12 col-12" >

      <div class="filtre-card mt-4">
        <mat-card style="border: solid 2px #F2F2F2;">
          <mat-card-header class="title"> <span style="margin-right: 70%;">Filter by</span><mat-icon type="button" data-bs-toggle="collapse" data-bs-target="#collapseFilter">expand_more</mat-icon></mat-card-header>

          <div class="body" id="collapseFilter">
            <li class="list-group-item d-flex justify-content-between align-items-start py-4">
              <div class="ms-2 me-auto">
                <div class="py-2 uppercase" style="font-size: 15px;font-weight: normal;"><span>Name Product </span></div>

                <div class="inputs d-flex mt-1">
                  <input  [(ngModel)]="search" (input)="getProductsByCategoryId()" type="text" style="margin-right: 50px;border-radius: 10px;height: 30px;border: #919191 2px solid;">
                </div>

              </div>

            </li>
            <li class="list-group-item d-flex justify-content-between align-items-start mt-2">
              <div class="ms-2 me-auto">
                <div class="py-2 uppercase" style="font-size: 15px;font-weight: normal;">Price</div>

                <div class="inputs d-flex mt-1">

                  <div class="input-min d-flex" style="margin-right: 5px;">
                    <label for="" class="uppercase mt-3 px-2">Min :</label>
                    <input type="number" [(ngModel)]="min" (input)="getProductsByCategoryId()" style="border-radius: 10px;height: 40px;border: #919191 2px solid;width: 60px;margin-top: 5px;text-align: center;">
                  </div>

                  <div class="input-min d-flex" style="margin-right: 5px;">
                    <label for="" class="uppercase mt-3 px-2">Max :</label>
                    <input type="number" [(ngModel)]="max" (input)="getProductsByCategoryId()" style="border-radius: 10px;height: 40px;border: #919191 2px solid;width: 60px;margin-top: 5px;text-align: center;">
                  </div>
                </div>
                <div class="py-2 uppercase mt-3" style="font-size: 15px;font-weight: normal;">
                  <button mat-mini-fab (click)="clearInputs()"  style="box-shadow: 0px 0px 0px 0px rgba(0,0,0,0);display: flex;">

                    <mat-icon>clear</mat-icon>
                  </button>
                </div>
              </div>
            </li>
          </div>
        </mat-card>
      </div>
    </div>

    <!-- ------------------------------------Product list --------------------------------->
    <div class="col col-xl-8  col-lg-8 col-md-12 col-sm-12 col-12 pt-5">

      <div class="mt-3 mb-5 d-flex">
        <h2 class="uppercase" style="color: rgb(36, 36, 36); font-weight: bold;font-family: Verdana, Geneva, Tahoma, sans-serif">{{category}}</h2>
        <div class="float-end ms-auto p-2">
          <button class="" mat-mini-fab color="accent" (click)="previousPage()" [disabled]="page === 0" style="box-shadow: 0px 0px 0px 0px rgba(0,0,0,0);margin-right: 5px">
            <mat-icon>keyboard_arrow_left</mat-icon>
          </button>

          <button color="accent" mat-mini-fab (click)="nextPage()" [disabled]="page==0" style="box-shadow: 0px 0px 0px 0px rgba(0,0,0,0);">
            <mat-icon>keyboard_arrow_right</mat-icon>
          </button>
        </div>
      </div>


      <!-- -------------------------product card ---------------------------->
      <div class="row mb-2">
        <ng-container *ngIf="products?.length>0">
          <div class="col col-12 col-sm-6 col-lg-6 col-xxl-6 col-xl-6 col-md-6 d-flex justify-content-center pa-2 pt-2" *ngFor="let item of products">
            <app-card [products]="item" [new]="false"></app-card>
          </div>
        </ng-container>
        <ng-container *ngIf="products?.length==0">
          <div class="no-product d-flex justify-content-center pt-5">
            <h3 style="font-size: 20px;">We couldn't find a match for <span *ngIf='search!=""' style="font-weight: 500;font-size: 20px;margin-left: 5px;">"{{search}}" </span> and price between <span style="font-weight: 500;font-size: 20px;margin-left: 5px;">"{{min}} - {{max}}"</span></h3>
          </div>
        </ng-container>
      </div>
    </div>
  </div>


</div>
